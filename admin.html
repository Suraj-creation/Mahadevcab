<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal — Mahadev Tour and Travel</title>
    <link rel="icon" type="image/jpeg" href="assets/images/logo.jpeg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/admin.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-card">
            <div class="login-logo" style="margin:0 auto; width:70px; height:70px;">
                <img src="assets/images/logo.jpeg" alt="Mahadev Cab Logo" style="width:70px; height:70px; border-radius:50%; object-fit:cover;">
            </div>
            <h1>Admin Portal</h1>
            <p>Mahadev Tour and Travel</p>
            <p class="login-subtitle">Sign in with your authorized Google account</p>
            
            <div id="googleSignInDiv"></div>
            
            <div class="login-error" id="loginError" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="loginErrorText">Access denied</span>
            </div>
            
            <a href="/" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to Website
            </a>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="admin-dashboard" id="adminDashboard" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <img src="assets/images/logo.jpeg" alt="Mahadev Cab Logo" style="width:40px; height:40px; border-radius:50%; object-fit:cover;">
                </div>
                <span>Admin Portal</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" data-section="packages">
                    <i class="fas fa-box-open"></i>
                    <span>Tour Packages</span>
                </a>
                <a href="#" class="sidebar-link" data-section="bookings">
                    <i class="fas fa-calendar-check"></i>
                    <span>Bookings</span>
                    <span class="badge">Soon</span>
                </a>
                <a href="#" class="sidebar-link" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                    <span class="badge">Soon</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="admin-info">
                    <img src="" alt="Admin" class="admin-avatar" id="adminAvatar">
                    <div class="admin-details">
                        <span class="admin-name" id="adminName">Admin</span>
                        <span class="admin-email" id="adminEmail">admin@email.com</span>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="admin-header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1>Tour Packages Management</h1>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" id="addPackageBtn">
                        <i class="fas fa-plus"></i>
                        Add New Package
                    </button>
                </div>
            </header>

            <!-- Packages Section -->
            <section class="content-section" id="packagesSection">
                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-box-open"></i></div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalPackages">0</span>
                            <span class="stat-label">Total Packages</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon active"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-info">
                            <span class="stat-value" id="activePackages">0</span>
                            <span class="stat-label">Active Packages</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon inactive"><i class="fas fa-pause-circle"></i></div>
                        <div class="stat-info">
                            <span class="stat-value" id="inactivePackages">0</span>
                            <span class="stat-label">Inactive Packages</span>
                        </div>
                    </div>
                </div>

                <!-- Packages List -->
                <div class="packages-container">
                    <div class="section-header">
                        <h2>All Packages</h2>
                        <div class="filter-group">
                            <select id="statusFilter" class="filter-select">
                                <option value="all">All Status</option>
                                <option value="active">Active Only</option>
                                <option value="inactive">Inactive Only</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="packages-list" id="packagesList">
                        <!-- Packages will be loaded here -->
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>Loading packages...</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Package Form Modal -->
    <div class="modal" id="packageModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Package</h2>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form class="package-form" id="packageForm">
                <input type="hidden" id="packageId">
                
                <!-- Basic Info -->
                <div class="form-section">
                    <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="title">Package Title *</label>
                            <input type="text" id="title" placeholder="e.g., Delhi Full Day Sightseeing" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subtitle">Subtitle / Tagline *</label>
                            <input type="text" id="subtitle" placeholder="e.g., Explore all of Delhi's iconic landmarks in one magnificent day" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" rows="3" placeholder="Detailed description of the package..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Package Details -->
                <div class="form-section">
                    <h3><i class="fas fa-list-ul"></i> Package Details</h3>
                    
                    <div class="form-row three-col">
                        <div class="form-group">
                            <label for="monuments">Number of Monuments</label>
                            <input type="number" id="monuments" placeholder="8" min="0">
                        </div>
                        <div class="form-group">
                            <label for="duration">Duration</label>
                            <input type="text" id="duration" placeholder="e.g., Full Day, 2 Days">
                        </div>
                        <div class="form-group">
                            <label for="moreSpots">+ More Spots Count</label>
                            <input type="number" id="moreSpots" placeholder="4" min="0">
                        </div>
                    </div>
                    
                    <div class="form-row three-col">
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="fuelIncluded" checked>
                                <span class="checkmark"></span>
                                Fuel Included
                            </label>
                        </div>
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="parkingIncluded" checked>
                                <span class="checkmark"></span>
                                Parking Included
                            </label>
                        </div>
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="tollsIncluded" checked>
                                <span class="checkmark"></span>
                                Tolls Included
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Pricing -->
                <div class="form-section">
                    <h3><i class="fas fa-rupee-sign"></i> Pricing</h3>
                    
                    <div class="form-row three-col">
                        <div class="form-group">
                            <label for="priceOriginal">Original Price (₹) *</label>
                            <input type="number" id="priceOriginal" placeholder="2499" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="priceDiscounted">Discounted Price (₹) *</label>
                            <input type="number" id="priceDiscounted" placeholder="1990" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="discount">Discount Label</label>
                            <input type="text" id="discount" placeholder="e.g., 20% OFF">
                        </div>
                    </div>
                </div>

                <!-- Itinerary -->
                <div class="form-section">
                    <h3><i class="fas fa-route"></i> Itinerary Preview</h3>
                    <p class="form-hint">Add the places and duration for itinerary preview</p>
                    
                    <div id="itineraryContainer">
                        <!-- Itinerary items will be added here -->
                    </div>
                    
                    <button type="button" class="btn btn-secondary" id="addItineraryBtn">
                        <i class="fas fa-plus"></i> Add Place
                    </button>
                </div>

                <!-- Image -->
                <div class="form-section">
                    <h3><i class="fas fa-image"></i> Package Image</h3>
                    
                    <div class="form-row two-col">
                        <div class="form-group">
                            <label for="imageName">Image Filename *</label>
                            <div class="input-with-action">
                                <input type="text" id="imageName" placeholder="package-delhi-sightseeing.jpg" required>
                                <button type="button" class="btn btn-icon" id="generateImageName" title="Auto-generate filename">
                                    <i class="fas fa-magic"></i>
                                </button>
                            </div>
                            <span class="form-hint">Place this image in: <code>assets/images/</code></span>
                        </div>
                        <div class="form-group">
                            <label for="imageAlt">Image Alt Text</label>
                            <input type="text" id="imageAlt" placeholder="Delhi Sightseeing Tour">
                        </div>
                    </div>
                    
                    <div class="image-preview-box">
                        <div class="image-placeholder" id="imagePreview">
                            <i class="fas fa-image"></i>
                            <span>Image Preview</span>
                            <small id="imagePathPreview">assets/images/[filename]</small>
                        </div>
                    </div>
                </div>

                <!-- Badge/Display -->
                <div class="form-section">
                    <h3><i class="fas fa-tag"></i> Badge & Display</h3>
                    
                    <div class="form-row three-col">
                        <div class="form-group">
                            <label for="badge">Badge Text</label>
                            <input type="text" id="badge" placeholder="e.g., Bestseller, Most Popular">
                        </div>
                        <div class="form-group">
                            <label for="badgeType">Badge Type</label>
                            <select id="badgeType">
                                <option value="">No Badge</option>
                                <option value="bestseller">Bestseller (Gold)</option>
                                <option value="popular">Most Popular (Orange)</option>
                                <option value="new">New (Green)</option>
                                <option value="featured">Featured (Purple)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="displayOrder">Display Order</label>
                            <input type="number" id="displayOrder" placeholder="0" min="0">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="carType">Applicable Car Type</label>
                            <select id="carType">
                                <option value="all">All Cars</option>
                                <option value="dzire">Maruti Dzire Only</option>
                                <option value="ertiga">Maruti Ertiga Only</option>
                                <option value="crysta">Toyota Crysta Only</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="isActive" checked>
                                <span class="checkmark"></span>
                                Package is Active (visible on website)
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        <span id="submitBtnText">Save Package</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal modal-sm" id="deleteModal">
        <div class="modal-overlay" id="deleteModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Delete Package</h2>
                <button class="modal-close" id="deleteModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>Are you sure you want to delete this package?</p>
                    <p class="package-name" id="deletePackageName"></p>
                    <p class="warning-text">This action cannot be undone.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="toast-icon fas fa-check-circle"></i>
        <span class="toast-message" id="toastMessage">Success!</span>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
